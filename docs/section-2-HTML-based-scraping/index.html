



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Companion website to the Python Web Scraping workshop">
      
      
        <link rel="canonical" href="https://monashdatafluency.github.io/python-web-scraping/section-2-HTML-based-scraping/">
      
      
        <meta name="author" content="Satya, Naveen and Tarun">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.2">
    
    
      
        <title>HTML based scraping - Python Web Scraping</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#03a9f4">
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#url-request-and-response" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://monashdatafluency.github.io/python-web-scraping/" title="Python Web Scraping" aria-label="Python Web Scraping" class="md-header-nav__button md-logo">
          
            <i class="md-icon">school</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Python Web Scraping
            </span>
            <span class="md-header-nav__topic">
              
                HTML based scraping
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/MonashDataFluency/python-web-scraping" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    python-web-scraping
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://monashdatafluency.github.io/python-web-scraping/" title="Python Web Scraping" class="md-nav__button md-logo">
      
        <i class="md-icon">school</i>
      
    </a>
    Python Web Scraping
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/MonashDataFluency/python-web-scraping" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    python-web-scraping
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../section-0-brief-python-refresher/" title="A (brief) Python refresher" class="md-nav__link">
      A (brief) Python refresher
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../section-1-intro-to-web-scraping/" title="Introduction to Web scraping" class="md-nav__link">
      Introduction to Web scraping
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        HTML based scraping
      </label>
    
    <a href="./" title="HTML based scraping" class="md-nav__link md-nav__link--active">
      HTML based scraping
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#url-request-and-response" class="md-nav__link">
    URL request and response
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-request-response-headers-and-status-codes" class="md-nav__link">
    HTTP request, response, headers and status codes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-and-post-calls-to-retrieve-response" class="md-nav__link">
    GET and POST calls to retrieve response
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scraping-a-webpage" class="md-nav__link">
    Scraping a webpage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parse-html-and-access-different-elements" class="md-nav__link">
    Parse HTML and access different elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manipulate-it-into-a-tabular-structure-explore-the-schema" class="md-nav__link">
    Manipulate it into a tabular structure - explore the schema
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#challenge" class="md-nav__link">
    Challenge
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#store-it-in-the-appropriate-format" class="md-nav__link">
    Store it in the appropriate format
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../section-3-API-based-scraping/" title="API based scraping" class="md-nav__link">
      API based scraping
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../section-4-wrangling-and-analysis/" title="Wrangling and Analysis" class="md-nav__link">
      Wrangling and Analysis
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../section-5-legal-and-ethical-considerations/" title="Legal and Ethical Considerations" class="md-nav__link">
      Legal and Ethical Considerations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../section-7-references/" title="References" class="md-nav__link">
      References
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#url-request-and-response" class="md-nav__link">
    URL request and response
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#http-request-response-headers-and-status-codes" class="md-nav__link">
    HTTP request, response, headers and status codes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-and-post-calls-to-retrieve-response" class="md-nav__link">
    GET and POST calls to retrieve response
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scraping-a-webpage" class="md-nav__link">
    Scraping a webpage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parse-html-and-access-different-elements" class="md-nav__link">
    Parse HTML and access different elements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manipulate-it-into-a-tabular-structure-explore-the-schema" class="md-nav__link">
    Manipulate it into a tabular structure - explore the schema
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#challenge" class="md-nav__link">
    Challenge
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#store-it-in-the-appropriate-format" class="md-nav__link">
    Store it in the appropriate format
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>HTML based scraping</h1>
                
                <p><a href="https://colab.research.google.com/github/MonashDataFluency/python-web-scraping/blob/master/notebooks/section-2-HTML-based-scraping.ipynb"><img alt="Open In Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<p><img src="../images/request.png"></p>
<p>In this section we will look at a few HTML fundamentals to understand how web scraping works and scrape a website for structured data</p>
<h3 id="url-request-and-response">URL request and response<a class="headerlink" href="#url-request-and-response" title="Permanent link">&para;</a></h3>
<hr />
<p>A <strong>URL</strong> is Uniform Resource Locator. It acts as a web address to different webpages. Every URL on the internet work on a request-response basis. The browser requests the server for a webpage and the response by the server would be the content of the webpage. This web content is then displayed on the browser.</p>
<p><strong>URL Request</strong> - Requesting a web server for content to be viewed by the user. This request is triggered whenever you click on a link or open a webpage.</p>
<p><strong>URL Response</strong> - A response for the request irrespective of success or failure. For every request to the web server, a mandatory response is provided by the web server and most of the times this would be the respective content requested by the URL Request.</p>
<h3 id="http-request-response-headers-and-status-codes">HTTP request, response, headers and status codes<a class="headerlink" href="#http-request-response-headers-and-status-codes" title="Permanent link">&para;</a></h3>
<hr />
<p>Instead of the browser requesting for the content of the webpage, Python can be used for the same. A <strong>HTTP request</strong> to the web server can be sent with the <code>requests</code> library and the response can be examined. Typically every request receives a response with <strong>response headers</strong> and <strong>status code</strong> details.</p>
<p>Let us request for the web content for the Monash University front webpage with the URL - <code>https://www.monash.edu/</code>. The requests library can be used to work with webpages and web content. A request is made to get the content of the webpage with the <code>get()</code> method.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">monash_web_url</span> <span class="o">=</span> <span class="s2">&quot;https://www.monash.edu/&quot;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">monash_web_url</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>A response is received from the web server. This response will have response headers and status codes associated to that particular request.
Response headers give the detailed information about the request made to the web server.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">response</span><span class="o">.</span><span class="n">headers</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>{&#39;Content-Type&#39;: &#39;text/html; charset=utf-8&#39;, &#39;Transfer-Encoding&#39;: &#39;chunked&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Vary&#39;: &#39;Accept-Encoding, Accept-Encoding&#39;, &#39;Cache-Control&#39;: &#39;max-age=0, private&#39;, &#39;X-Content-Type-Options&#39;: &#39;nosniff&#39;, &#39;X-Cache&#39;: &#39;HIT from squizedge.net&#39;, &#39;Pragma&#39;: &#39;cache&#39;, &#39;Age&#39;: &#39;89&#39;, &#39;Server&#39;: &#39;openresty&#39;, &#39;Via&#39;: &#39;1.1 squizedge.net&#39;, &#39;Date&#39;: &#39;Thu, 16 Jul 2020 10:09:08 GMT&#39;, &#39;X-upgrade-enabled&#39;: &#39;off&#39;, &#39;X-Frame-Options&#39;: &#39;SAMEORIGIN&#39;, &#39;Expires&#39;: &#39;Thu, 16 Jul 2020 10:39:08 GMT&#39;, &#39;X-Request-ID&#39;: &#39;417b2838-f05d-49fe-912f-e2ce77294f3d&#39;, &#39;Content-Encoding&#39;: &#39;gzip&#39;}
</code></pre></div>
</td></tr></table>

<p>Every response will have a status code. The status codes indicate whether a specific HTTP request has been successfully completed.
Responses are grouped in five classes:</p>
<ul>
<li>Informational responses <code>(100–199)</code></li>
<li>Successful responses <code>(200–299)</code></li>
<li>Redirects <code>(300–399)</code></li>
<li>Client errors <code>(400–499)</code></li>
<li>Server errors <code>(500–599)</code></li>
</ul>
<p>Let us check the response status code for the HTTP request we placed</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>200
</code></pre></div>
</td></tr></table>

<p>The response has a status code of <code>200</code>. This is a successful response and hence there should be relevant content of the webpage in the obtained response. This can be checked by printing the content. This content received is the HTML source code of the webpage.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">[:</span><span class="mi">2000</span><span class="p">]</span> <span class="c1"># check the end index</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>b&#39;&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n    &lt;head&gt;\n        &lt;meta charset=&quot;utf-8&quot; /&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n        &lt;title&gt;Monash University - one of the top universities in Australia&lt;/title&gt;\n\n        &lt;link rel=&quot;canonical&quot; href=&quot;https://www.monash.edu&quot; /&gt;\n        \n        \n        \r\n&lt;!-- For iPad with high-resolution Retina display running iOS \xe2\x89\xa5 7: --&gt;\r\n&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;152x152&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-152.png&quot;&gt;\r\n\r\n&lt;!-- For iPad with high-resolution Retina display running iOS \xe2\x89\xa4 6: --&gt;\r\n&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;144x144&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-144.png&quot;&gt;\r\n\r\n&lt;!-- For iPhone with high-resolution Retina display running iOS \xe2\x89\xa5 7: --&gt;\r\n&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;120x120&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-120.png&quot;&gt;\r\n\r\n&lt;!-- For iPhone with high-resolution Retina display running iOS \xe2\x89\xa4 6: --&gt;\r\n&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;114x114&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-114.png&quot;&gt;\r\n\r\n&lt;!-- For first- and second-generation iPad: --&gt;\r\n&lt;link rel=&quot;apple-touch-icon-precomposed&quot; sizes=&quot;72x72&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-72.png&quot;&gt;\r\n\r\n&lt;!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: --&gt;\r\n&lt;link rel=&quot;apple-touch-icon-precomposed&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-57.png&quot;&gt;\r\n\r\n&lt;link rel=&quot;icon&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon.ico&quot;&gt;\r\n&lt;!--[if IE]&gt;&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favico&#39;
</code></pre></div>
</td></tr></table>

<p>This text which looks very gibberish actually has a structure underneath. This can be observed if printed on a HTML editor.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>\n
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>\n

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span> <span class="p">/&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Monash University - one of the top universities in Australia<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>\n\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;canonical&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu&quot;</span> <span class="p">/&gt;</span>\n \n \n \r\n
    <span class="c">&lt;!-- For iPad with high-resolution Retina display running iOS \xe2\x89\xa5 7: --&gt;</span>\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;apple-touch-icon-precomposed&quot;</span> <span class="na">sizes</span><span class="o">=</span><span class="s">&quot;152x152&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-152.png&quot;</span><span class="p">&gt;</span>\r\n\r\n
    <span class="c">&lt;!-- For iPad with high-resolution Retina display running iOS \xe2\x89\xa4 6: --&gt;</span>\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;apple-touch-icon-precomposed&quot;</span> <span class="na">sizes</span><span class="o">=</span><span class="s">&quot;144x144&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-144.png&quot;</span><span class="p">&gt;</span>\r\n\r\n
    <span class="c">&lt;!-- For iPhone with high-resolution Retina display running iOS \xe2\x89\xa5 7: --&gt;</span>\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;apple-touch-icon-precomposed&quot;</span> <span class="na">sizes</span><span class="o">=</span><span class="s">&quot;120x120&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-120.png&quot;</span><span class="p">&gt;</span>\r\n\r\n
    <span class="c">&lt;!-- For iPhone with high-resolution Retina display running iOS \xe2\x89\xa4 6: --&gt;</span>\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;apple-touch-icon-precomposed&quot;</span> <span class="na">sizes</span><span class="o">=</span><span class="s">&quot;114x114&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-114.png&quot;</span><span class="p">&gt;</span>\r\n\r\n
    <span class="c">&lt;!-- For first- and second-generation iPad: --&gt;</span>\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;apple-touch-icon-precomposed&quot;</span> <span class="na">sizes</span><span class="o">=</span><span class="s">&quot;72x72&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-72.png&quot;</span><span class="p">&gt;</span>\r\n\r\n
    <span class="c">&lt;!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: --&gt;</span>\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;apple-touch-icon-precomposed&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon-57.png&quot;</span><span class="p">&gt;</span>\r\n\r\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;icon&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favicon.ico&quot;</span><span class="p">&gt;</span>\r\n
    <span class="c">&lt;!--[if IE]&gt;&lt;link rel=&quot;shortcut icon&quot; type=&quot;image/x-icon&quot; href=&quot;https://www.monash.edu/__data/assets/git_bridge/0006/509343/deploy/mysource_files/favico</span>
</code></pre></div>
</td></tr></table>

<h3 id="get-and-post-calls-to-retrieve-response">GET and POST calls to retrieve response<a class="headerlink" href="#get-and-post-calls-to-retrieve-response" title="Permanent link">&para;</a></h3>
<hr />
<p><img src="../images/get_post_requests.png"></p>
<p>There are mainly two types of requests which can be made to the web server. A GET request/call or a POST request/call.</p>
<p><strong>GET call</strong> - GET is used to request data from a specified source. They are one of the most common HTTP requests. They are usually used to only receive content from the web server. An example would be to receive the content of the complete webpage.</p>
<p><strong>POST call</strong> - POST is used to send data in the URL request to either update details or request specific content from the web server. In a POST call, data is sent and then a response can be expected from the web server. An example would be to request content from a web server based on a particular selection from a drop-down menu. The selection option is upadted while also respective content is sent back.</p>
<h3 id="scraping-a-webpage">Scraping a webpage<a class="headerlink" href="#scraping-a-webpage" title="Permanent link">&para;</a></h3>
<hr />
<p>Let us now scrape a <strong>list of the fotune 500 companies for the year 2018</strong>. The website from which the data is to be scraped is <code>https://www.zyxware.com/articles/5914/list-of-fortune-500-companies-and-their-websites-2018</code>.</p>
<p><img alt="fortune 500" src="../images/fortune_500.png" /></p>
<p>It can be seen on this website that the list contains the rank, company name and the website of the company. The whole content of this website can be received as a response when requested with the request library in Python</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">web_url</span> <span class="o">=</span> <span class="s1">&#39;https://www.zyxware.com/articles/5914/list-of-fortune-500-companies-and-their-websites-2018&#39;</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">web_url</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Status code</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">--</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Content of the website</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">[:</span><span class="mi">2000</span><span class="p">])</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>Status code
 200

--

Content of the website
 b&#39;&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; dir=&quot;ltr&quot; prefix=&quot;content: http://purl.org/rss/1.0/modules/content/  dc: http://purl.org/dc/terms/  foaf: http://xmlns.com/foaf/0.1/  og: http://ogp.me/ns#  rdfs: http://www.w3.org/2000/01/rdf-schema#  schema: http://schema.org/  sioc: http://rdfs.org/sioc/ns#  sioct: http://rdfs.org/sioc/types#  skos: http://www.w3.org/2004/02/skos/core#  xsd: http://www.w3.org/2001/XMLSchema# &quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n&lt;script&gt;dataLayer = [];dataLayer.push({&quot;tag&quot;: &quot;5914&quot;});&lt;/script&gt;\n&lt;script&gt;window.dataLayer = window.dataLayer || []; window.dataLayer.push({&quot;drupalLanguage&quot;:&quot;en&quot;,&quot;drupalCountry&quot;:&quot;IN&quot;,&quot;siteName&quot;:&quot;Zyxware Technologies&quot;,&quot;entityCreated&quot;:&quot;1562300185&quot;,&quot;entityLangcode&quot;:&quot;en&quot;,&quot;entityStatus&quot;:&quot;1&quot;,&quot;entityUid&quot;:&quot;1&quot;,&quot;entityUuid&quot;:&quot;6fdfb477-ce5d-4081-9010-3afd9260cdf7&quot;,&quot;entityVid&quot;:&quot;15541&quot;,&quot;entityName&quot;:&quot;webmaster&quot;,&quot;entityType&quot;:&quot;node&quot;,&quot;entityBundle&quot;:&quot;story&quot;,&quot;entityId&quot;:&quot;5914&quot;,&quot;entityTitle&quot;:&quot;List of Fortune 500 companies and their websites (2018)&quot;,&quot;entityTaxonomy&quot;:{&quot;vocabulary_2&quot;:&quot;Business Insight, Fortune 500, Drupal Insight, Marketing Resources&quot;},&quot;userUid&quot;:0});&lt;/script&gt;\n&lt;script async src=&quot;https://www.googletagmanager.com/gtag/js?id=UA-1488254-2&quot;&gt;&lt;/script&gt;\n&lt;script&gt;window.google_analytics_uacct = &quot;UA-1488254-2&quot;;window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments)};gtag(&quot;js&quot;, new Date());window[\&#39;GoogleAnalyticsObject\&#39;] = \&#39;ga\&#39;;\r\n  window[\&#39;ga\&#39;] = window[\&#39;ga\&#39;] || function() {\r\n    (window[\&#39;ga\&#39;].q = window[\&#39;ga\&#39;].q || []).push(arguments)\r\n  };\r\nga(&quot;set&quot;, &quot;dimension2&quot;, window.analytics_manager_node_age);\r\nga(&quot;set&quot;, &quot;dimension3&quot;, window.analytics_manager_node_author);gtag(&quot;config&quot;, &quot;UA-1488254-2&quot;, {&quot;groups&quot;:&quot;default&quot;,&quot;anonymize_ip&quot;:true,&quot;page_path&quot;:location.pathname + location.search + location.hash,&quot;link_attribution&quot;:true,&quot;allow_ad_personalization_signals&quot;:false});&lt;/script&gt;\n&lt;script&gt;(function(w,d,t,u,n,a,m){w[\&#39;MauticTrackingObject\&#39;]=n;w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments)},a=d.createElement(t),m=d.ge&#39;
</code></pre></div>
</td></tr></table>

<p>This text when formatted looks like this,</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>\n
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span> <span class="na">dir</span><span class="o">=</span><span class="s">&quot;ltr&quot;</span> <span class="na">prefix</span><span class="o">=</span><span class="s">&quot;content: http://purl.org/rss/1.0/modules/content/  dc: http://purl.org/dc/terms/  foaf: http://xmlns.com/foaf/0.1/  og: http://ogp.me/ns#  rdfs: http://www.w3.org/2000/01/rdf-schema#  schema: http://schema.org/  sioc: http://rdfs.org/sioc/ns#  sioct: http://rdfs.org/sioc/types#  skos: http://www.w3.org/2004/02/skos/core#  xsd: http://www.w3.org/2001/XMLSchema# &quot;</span><span class="p">&gt;</span>\n

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span> <span class="p">/&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="nx">dataLayer</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="s2">&quot;tag&quot;</span><span class="o">:</span> <span class="s2">&quot;5914&quot;</span>
        <span class="p">});</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="s2">&quot;drupalLanguage&quot;</span><span class="o">:</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
            <span class="s2">&quot;drupalCountry&quot;</span><span class="o">:</span> <span class="s2">&quot;IN&quot;</span><span class="p">,</span>
            <span class="s2">&quot;siteName&quot;</span><span class="o">:</span> <span class="s2">&quot;Zyxware Technologies&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityCreated&quot;</span><span class="o">:</span> <span class="s2">&quot;1562300185&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityLangcode&quot;</span><span class="o">:</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityStatus&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityUid&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityUuid&quot;</span><span class="o">:</span> <span class="s2">&quot;6fdfb477-ce5d-4081-9010-3afd9260cdf7&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityVid&quot;</span><span class="o">:</span> <span class="s2">&quot;15541&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityName&quot;</span><span class="o">:</span> <span class="s2">&quot;webmaster&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityType&quot;</span><span class="o">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityBundle&quot;</span><span class="o">:</span> <span class="s2">&quot;story&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityId&quot;</span><span class="o">:</span> <span class="s2">&quot;5914&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityTitle&quot;</span><span class="o">:</span> <span class="s2">&quot;List of Fortune 500 companies and their websites (2018)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;entityTaxonomy&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;vocabulary_2&quot;</span><span class="o">:</span> <span class="s2">&quot;Business Insight, Fortune 500, Drupal Insight, Marketing Resources&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;userUid&quot;</span><span class="o">:</span> <span class="mi">0</span>
        <span class="p">});</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">async</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://www.googletagmanager.com/gtag/js?id=UA-1488254-2&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">google_analytics_uacct</span> <span class="o">=</span> <span class="s2">&quot;UA-1488254-2&quot;</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>

        <span class="kd">function</span> <span class="nx">gtag</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span>
        <span class="p">};</span>
        <span class="nx">gtag</span><span class="p">(</span><span class="s2">&quot;js&quot;</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
        <span class="nb">window</span><span class="p">[</span><span class="err">\</span><span class="s1">&#39;GoogleAnalyticsObject\&#39;] = \&#39;ga\&#39;;\r\n  window[\&#39;ga\&#39;] = window[\&#39;ga\&#39;] || function() {\r\n    (window[\&#39;ga\&#39;].q = window[\&#39;ga\&#39;</span><span class="p">].</span><span class="nx">q</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span><span class="err">\</span><span class="nx">r</span><span class="err">\</span><span class="nx">n</span>  <span class="p">};</span><span class="err">\</span><span class="nx">r</span><span class="err">\</span><span class="nx">nga</span><span class="p">(</span><span class="s2">&quot;set&quot;</span><span class="p">,</span> <span class="s2">&quot;dimension2&quot;</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">analytics_manager_node_age</span><span class="p">);</span><span class="err">\</span><span class="nx">r</span><span class="err">\</span><span class="nx">nga</span><span class="p">(</span><span class="s2">&quot;set&quot;</span><span class="p">,</span> <span class="s2">&quot;dimension3&quot;</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">analytics_manager_node_author</span><span class="p">);</span><span class="nx">gtag</span><span class="p">(</span><span class="s2">&quot;config&quot;</span><span class="p">,</span> <span class="s2">&quot;UA-1488254-2&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;groups&quot;</span><span class="o">:</span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="s2">&quot;anonymize_ip&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="s2">&quot;page_path&quot;</span><span class="o">:</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">search</span> <span class="o">+</span> <span class="nx">location</span><span class="p">.</span><span class="nx">hash</span><span class="p">,</span><span class="s2">&quot;link_attribution&quot;</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="s2">&quot;allow_ad_personalization_signals&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">});</span>
    <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;title&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;List of Fortune 500 companies and their websites (2018) | Zyxware Technologies&quot;</span> <span class="p">/&gt;</span>\n
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;canonical&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://</span>
</code></pre></div>
</td></tr></table>

<blockquote>
<p>Note : It is always a good idea to "prettify" HTML, XML or JSON strings for visual clarity.</p>
</blockquote>
<h3 id="parse-html-and-access-different-elements">Parse HTML and access different elements<a class="headerlink" href="#parse-html-and-access-different-elements" title="Permanent link">&para;</a></h3>
<hr />
<p><code>bs4</code> is a Python library which parses through HTML content and understands the complete structure of the content. The response content can be passed to a <code>BeautifulSoup()</code> method to obtain a soup object which looks very structured.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">soup_object</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

<span class="c1"># Uncomment the below line and look into the contents of soup_object</span>
<span class="c1"># soup_object</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>C:\Users\Naveen Kaushik\Anaconda2\envs\py36\lib\site-packages\bs4\__init__.py:181: UserWarning: No parser was explicitly specified, so I&#39;m using the best available HTML parser for this system (&quot;lxml&quot;). This usually isn&#39;t a problem, but if you run this code on another system, or in a different virtual environment, it may use a different parser and behave differently.

The code that caused this warning is on line 193 of the file C:\Users\Naveen Kaushik\Anaconda2\envs\py36\lib\runpy.py. To get rid of this warning, change code that looks like this:

 BeautifulSoup(YOUR_MARKUP})

to this:

 BeautifulSoup(YOUR_MARKUP, &quot;lxml&quot;)

  markup_type=markup_type))
</code></pre></div>
</td></tr></table>

<h3 id="manipulate-it-into-a-tabular-structure-explore-the-schema">Manipulate it into a tabular structure - explore the schema<a class="headerlink" href="#manipulate-it-into-a-tabular-structure-explore-the-schema" title="Permanent link">&para;</a></h3>
<hr />
<p>To be able to accurately extract relevant data from the webpage, it is important to explore the schema and understand the structure of the webpage. A good way to do this is to inspect the webpage directly on a web browser.
<br></p>
<p>To do this,
- Open the webpage on a browser
- Right click on the data content to be extracted
- Click on <code>Inspect</code> or <code>Inspect element</code> option</p>
<p>This will open a console window which shows the real time HTML code corresponding to the web content. Now identify the type of HTML tag which contains all the data along with any id names or class names associated to that HTML tag. In our case, the data is enclosed in the <code>&lt;table&gt;</code> HTML tag with the class name <code>'data-table'</code>. This information can be used to search for the web content directly in our soup object with the <code>find_all()</code> method. This will return a soup object.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">data_table</span> <span class="o">=</span> <span class="n">soup_object</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="s1">&#39;data-table&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Uncomment the below line and look into the contents of data_table</span>
<span class="c1"># data_table</span>
</code></pre></div>
</td></tr></table>

<p>It can be seen that relevant block of data has been extracted but further extracted needs to be done to individually extract the rank, company name and the company website data. On further analysis, it can be seen that every row of data is enclosed under a <code>&lt;tr&gt;</code> HTML tag which means <code>table row</code>. All these row values can be extracted into a list of values by finding the <code>&lt;tr&gt;</code> values from our newly created soup object <code>data_table</code>.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">all_values</span> <span class="o">=</span> <span class="n">data_table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
<span class="n">all_values</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span> <span class="c1"># Prints the first 10 captured tag elements</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>[&lt;tr&gt;&lt;th&gt;Rank&lt;/th&gt;
 &lt;th&gt;Company&lt;/th&gt;
 &lt;th&gt;Website&lt;/th&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
 &lt;td&gt;Walmart&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.stock.walmart.com&quot;&gt;http://www.stock.walmart.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
 &lt;td&gt;Exxon Mobil&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.exxonmobil.com&quot;&gt;http://www.exxonmobil.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;3&lt;/td&gt;
 &lt;td&gt;Berkshire Hathaway&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.berkshirehathaway.com&quot;&gt;http://www.berkshirehathaway.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;4&lt;/td&gt;
 &lt;td&gt;Apple&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.apple.com&quot;&gt;http://www.apple.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;5&lt;/td&gt;
 &lt;td&gt;UnitedHealth Group&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.unitedhealthgroup.com&quot;&gt;http://www.unitedhealthgroup.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;6&lt;/td&gt;
 &lt;td&gt;McKesson&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.mckesson.com&quot;&gt;http://www.mckesson.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;7&lt;/td&gt;
 &lt;td&gt;CVS Health&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.cvshealth.com&quot;&gt;http://www.cvshealth.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;8&lt;/td&gt;
 &lt;td&gt;Amazon.com&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.amazon.com&quot;&gt;http://www.amazon.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;, &lt;tr&gt;&lt;td&gt;9&lt;/td&gt;
 &lt;td&gt;AT&amp;amp;T&lt;/td&gt;
 &lt;td&gt;&lt;a href=&quot;http://www.att.com&quot;&gt;http://www.att.com&lt;/a&gt;&lt;/td&gt;
 &lt;/tr&gt;]
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">all_values</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">all_values</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">all_values</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</code></pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code>&lt;tr&gt;&lt;th&gt;Rank&lt;/th&gt;
&lt;th&gt;Company&lt;/th&gt;
&lt;th&gt;Website&lt;/th&gt;
&lt;/tr&gt;
--
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;Walmart&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.stock.walmart.com&quot;&gt;http://www.stock.walmart.com&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
--
&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;Exxon Mobil&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.exxonmobil.com&quot;&gt;http://www.exxonmobil.com&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
</code></pre></div>
</td></tr></table>

<h4 id="challenge">Challenge<a class="headerlink" href="#challenge" title="Permanent link">&para;</a></h4>
<hr />
<p>Explore the schema further, extract the column names which are located in the first row and print them.</p>
<p>The first element of the list contains the column names 'Rank, Company and Website'. The next elements of the list contain soup objects which contain the company data including the rank. This data can be extracted in a loop since the structure for all the list elements is the same.</p>
<ul>
<li>An empty dataframe <code>fortune_500_df</code> is created with the column names <code>rank</code>, <code>company_name</code> and <code>company_website</code></li>
<li>The index is initiated to zero</li>
<li>A for loop is designed to go through all the elements of the list in order and extract the rank, company name and company website from the list element which are enclosed in the <code>&lt;td&gt;</code> HTML tag. A <code>find_all()</code> will return a list of td tags.</li>
<li>The <code>.text</code> attribute can be used to just pick the text part from the tag. In our case this is the rank, company name and the company website</li>
<li>These values are then put into the dataframe and the index value is incremented</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">fortune_500_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;rank&#39;</span><span class="p">,</span> <span class="s1">&#39;company_name&#39;</span><span class="p">,</span> <span class="s1">&#39;company_website&#39;</span><span class="p">])</span> <span class="c1"># Create an empty dataframe</span>
<span class="n">ix</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Initialise index to zero</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">all_values</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;td&#39;</span><span class="p">)</span> <span class="c1"># Extract all elements with tag &lt;td&gt;</span>
    <span class="c1"># Pick only the text part from the &lt;td&gt; tag</span>
    <span class="n">rank</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">company</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>
    <span class="n">website</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>

    <span class="n">fortune_500_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ix</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">rank</span><span class="p">,</span> <span class="n">company</span><span class="p">,</span> <span class="n">website</span><span class="p">]</span> <span class="c1"># Store it in the dataframe as a row</span>
    <span class="n">ix</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># Print the first 5 rows of the dataframe</span>
<span class="n">fortune_500_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rank</th>
      <th>company_name</th>
      <th>company_website</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Walmart</td>
      <td>http://www.stock.walmart.com</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>Exxon Mobil</td>
      <td>http://www.exxonmobil.com</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Berkshire Hathaway</td>
      <td>http://www.berkshirehathaway.com</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Apple</td>
      <td>http://www.apple.com</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>UnitedHealth Group</td>
      <td>http://www.unitedhealthgroup.com</td>
    </tr>
  </tbody>
</table>
</div>

<table>
<thead>
<tr>
<th align="right"></th>
<th align="right">rank</th>
<th align="left">company_name</th>
<th align="left">company_website</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">Walmart</td>
<td align="left">http://www.stock.walmart.com</td>
</tr>
<tr>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Exxon Mobil</td>
<td align="left">http://www.exxonmobil.com</td>
</tr>
<tr>
<td align="right">2</td>
<td align="right">3</td>
<td align="left">Berkshire Hathaway</td>
<td align="left">http://www.berkshirehathaway.com</td>
</tr>
<tr>
<td align="right">3</td>
<td align="right">4</td>
<td align="left">Apple</td>
<td align="left">http://www.apple.com</td>
</tr>
<tr>
<td align="right">4</td>
<td align="right">5</td>
<td align="left">UnitedHealth Group</td>
<td align="left">http://www.unitedhealthgroup.com</td>
</tr>
</tbody>
</table>
<h3 id="store-it-in-the-appropriate-format">Store it in the appropriate format<a class="headerlink" href="#store-it-in-the-appropriate-format" title="Permanent link">&para;</a></h3>
<hr />
<p>The dataframe can now be stored as a csv file. Pandas has a <code>to_csv</code> method which can be used to save the data into the file.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">fortune_500_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;fortune_500_companies.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../section-1-intro-to-web-scraping/" title="Introduction to Web scraping" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Introduction to Web scraping
              </span>
            </div>
          </a>
        
        
          <a href="../section-3-API-based-scraping/" title="API based scraping" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                API based scraping
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/MonashDataFluency/python-web-scraping" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>